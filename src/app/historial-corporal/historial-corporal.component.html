<button
    (click)="cancelar()"
    class="fixed top-4 left-4 z-50 flex items-center gap-2 bg-white text-yellow-700 hover:text-yellow-600 px-4 py-2 rounded-lg shadow transition"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
      stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M15 19l-7-7 7-7" />
    </svg>
    <span class="font-medium">Volver</span>
  </button>

<body class="min-h-screen bg-white text-gray-800 font-sans">
  <div class="max-w-2xl mx-auto py-16 px-4">
    <div class="bg-white p-8 rounded-xl shadow-xl">
      <h2 class="text-3xl font-bold text-center text-yellow-800 mb-8">Gestionar Historial Corporal</h2>

      <!-- Formulario para crear un nuevo historial -->
      <form [formGroup]="historialForm" (ngSubmit)="crearHistorial()" class="space-y-6">
        <!-- Peso -->
        <div>
          <label class="block text-sm font-medium text-yellow-700 mb-1">Peso (kg)</label>
          <input
            formControlName="pesoKg"
            type="number"
            step="0.1"
            class="w-full p-3 border border-gray-300 bg-gray-50 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition"
          />
          <div *ngIf="historialForm.get('pesoKg')?.invalid && historialForm.get('pesoKg')?.touched" class="text-red-500 text-sm mt-1">
            El peso debe ser mayor a 0.1 kg
          </div>
        </div>

        <!-- ID Usuario -->
        <div>
          <label class="block text-sm font-medium text-yellow-700 mb-1">ID de Usuario</label>
          <input
            formControlName="idUsuario"
            type="number"
            class="w-full p-3 border border-gray-300 bg-gray-50 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition"
          />
          <div *ngIf="historialForm.get('idUsuario')?.invalid && historialForm.get('idUsuario')?.touched" class="text-red-500 text-sm mt-1">
            El ID de usuario debe ser mayor a 0
          </div>
        </div>

        <!-- Botones -->
        <button
          type="submit"
          [disabled]="historialForm.invalid"
          class="w-full py-3 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold rounded-md shadow-md transition"
        >
          Crear Historial
        </button>
        <button
          type="button"
          (click)="cancelar()"
          class="w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded-md hover:bg-gray-300 transition duration-200"
        >
          Cancelar
        </button>
      </form>

      <!-- Filtro por ID de usuario -->
      <div class="mt-8">
        <label class="block text-sm font-medium text-yellow-700 mb-1">Filtrar por ID de Usuario</label>
        <input
          type="number"
          [(ngModel)]="idUsuarioFiltro"
          (input)="filtrarPorUsuario()"
          class="w-full p-3 border border-gray-300 bg-gray-50 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition"
        />
      </div>

      <!-- Mensaje de error -->
      <div *ngIf="errorMessage" class="text-red-500 text-center mt-4">{{ errorMessage }}</div>

      <!-- Tabla de historiales -->
      <div class="mt-8 overflow-x-auto">
        <table class="w-full border-collapse">
          <thead>
            <tr class="bg-gray-100">
              <th class="p-3 text-left text-sm font-medium text-yellow-700">ID</th>
              <th class="p-3 text-left text-sm font-medium text-yellow-700">Fecha Control</th>
              <th class="p-3 text-left text-sm font-medium text-yellow-700">Peso (kg)</th>
              <th class="p-3 text-left text-sm font-medium text-yellow-700">Nombre Usuario</th>

            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let historial of historiales" class="border-b">
              <td class="p-3">{{ historial.idHistorial }}</td>
              <td class="p-3">{{ historial.fechaControl | date:'medium' }}</td>
              <td class="p-3">{{ historial.pesoKg }}</td>
              <td class="p-3">{{ historial.nombreUsuario }}</td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
